CREATE TABLE users (
    id INT PRIMARY KEY,
    first_name VARCHAR2(100) NOT NULL,
    last_name VARCHAR2(100) NOT NULL,
    email VARCHAR2(255) UNIQUE NOT NULL,
    password VARCHAR2(255) NOT NULL,
    role VARCHAR2(50) NOT NULL
);

INSERT INTO users (id, first_name, last_name, email, password, role)
VALUES (1, 'Admin', 'User', 'admin@example.com', 'hashed_password_here', 'admin');

INSERT INTO users (id, first_name, last_name, email, password, role)
VALUES (2, 'Normal', 'User', 'user@example.com', 'hashed_password_here', 'user');

CREATE SEQUENCE users_seq START WITH 1 INCREMENT BY 1;

CREATE TABLE transactions (
    transaction_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_email VARCHAR2(255) NOT NULL,
    action VARCHAR2(50) CHECK (action IN ('BUY', 'SELL')),
    stock_name VARCHAR2(100) NOT NULL,
    quantity NUMBER NOT NULL,
    price_per_unit NUMBER NOT NULL,
    transaction_date DATE DEFAULT SYSDATE,
    FOREIGN KEY (user_email) REFERENCES users (email)
);
